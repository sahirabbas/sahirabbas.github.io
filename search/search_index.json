{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to DevOps for Beginners: A Comprehensive Documentation","text":"<p>For source repositories visit github.com.</p>"},{"location":"#introduction","title":"Introduction","text":"<p>Greetings, aspiring DevOps enthusiasts! This platform aims to serve as your ultimate resource for navigating the world of DevOps. Here, you will find a rich collection of well-crafted documentation tailored specifically to assist beginners like you in mastering the intricacies of day-to-day DevOps practices.</p> <p>Our mission is to empower you with essential knowledge, best practices, and hands-on guidance that will not only foster your understanding but also propel you confidently forward in your DevOps journey. From version control and continuous integration to deployment strategies and infrastructure automation, we've got you covered.</p> <p>Dive in, explore, and embark on an exciting expedition into the realm of DevOps as we accompany you every step of the way. Let's set sail on this enlightening voyage together!</p>"},{"location":"evicted_pod_cleanup/","title":"Automated Cleanup of Evicted Pods in Kubernetes (Workaround)","text":""},{"location":"evicted_pod_cleanup/#introduction","title":"Introduction","text":"<p>Pod eviction can occur for various reasons, presenting challenges to Kubernetes administrators. Examples include scaling by VerticalPodAutoscaler, resource pressure on a Node, higher priority Pod preemption, or exceeding an emptyDir usage limit. However, Kubernetes does not automatically remove evicted pods. In this article, we introduce a practical workaround utilizing cronjobs to automate the cleanup process for evicted pods.</p>"},{"location":"evicted_pod_cleanup/#prerequisites","title":"Prerequisites","text":"<ul> <li>Kubernetes Cluster admin rights.</li> <li>Helm installed.</li> </ul>"},{"location":"evicted_pod_cleanup/#workaround-deployment","title":"Workaround Deployment","text":"<p>We have developed a convenient Helm template for deploying the cronjob to handle evicted pod cleanup effectively. The chart sets up the following Kubernetes resources:</p> <ol> <li>Namespace</li> <li>Service account</li> <li>Cluster Role</li> <li>Cluster Rolebinding</li> <li>Cronjob</li> </ol>"},{"location":"evicted_pod_cleanup/#step-by-step-deployment","title":"Step-by-Step Deployment","text":"<ol> <li>Clone the GitHub repository containing the Helm chart:</li> </ol> <pre><code>git clone https://github.com/sahirabbas/remove_evicted_pods_workaround.git\n</code></pre> <ol> <li>Deploy the cronjob using Helm in your Kubernetes Cluster:</li> </ol> <pre><code>cd remove_evicted_pods_workaround \nhelm install &lt;name&gt; .\n</code></pre> <p>Note: Replace <code>&lt;name&gt;</code> with a suitable identifier for your deployment.</p> <p>By default, the chart will create a namespace called evicted-pods-cleanup, and the cronjob will run every 30 minutes. However, you can override these values by modifying the Helm chart with your desired settings.</p>"},{"location":"evicted_pod_cleanup/#overridable-values","title":"Overridable Values","text":"Parameter Description Default Value <code>namespace</code> Namespace for the resources <code>evicted-pods-cleanup</code> <code>cronjob.name</code> Name of the cronjob <code>evicted-pods-cleanup</code> <code>cronjob.schedule</code> Cron expression for the job execution <code>*/30 * * * *</code> <code>serviceaccount.name</code> ServiceAccount Name <code>podevict-sa</code> <code>clusterrole.name</code> ClusterRole Name <code>romove-evicted</code> <code>clusterrolebinding.name</code> ClusterRoleBinding Name <code>romove-evicted</code> <code>cronjob.activedeadlineseconds</code> activeDeadlineSeconds for the Cronjob <code>1500</code> <code>cronjob.startingdeadlineseconds</code> startingDeadlineSeconds for the Cronjob <code>180</code> <code>failedjobshistorylimit</code> failedJobsHistoryLimit to keep <code>1</code> <code>successfuljobshistorylimit</code> successfulJobsHistoryLimit to keep <code>1</code> <p>To override a value, like the cron timing, use the following command:</p> <pre><code>helm install remove-evic --set cronjob.schedule='*/20 * * * *' .\n</code></pre> <p>With this automated cleanup solution in place, you can rest assured that evicted pods will be efficiently managed, contributing to the smooth operation of your Kubernetes Cluster. This workaround empowers administrators to focus on higher-level tasks while keeping the environment clean and optimized.</p>"}]}